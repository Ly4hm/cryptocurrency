# 基于 RSA 盲签名的交易系统实现

## RSA 盲签名
使用第三方库 cryptography 进行rsa密钥生成
> https://cryptography.io/en/latest/hazmat/primitives/asymmetric/rsa/


## 架构
![1.png](https://ice.frostsky.com/2024/09/23/992a3691671eaefd5ef7fd75116b99b6.png)

根据这个架构，我们设计了如下所述的交易系统，该系统旨在将现实货币交易转化为不可追溯的虚拟货币交易

在这个交易系统中，我们设计了三个关键角色：

1. **中央银行**  
   - 作为现实货币与虚拟货币之间的桥梁，用户可以在中央银行将现实货币转换为“签名机会”，在本系统中，**每次签名机会相当于一枚 Coin**。Coin 即为系统中的虚拟货币。
   - ***中央银行* 并不直接分发 Coin，而是提供对 Coin 的签名与验证服务**。用户通过将一定数量的现实货币兑换为签名机会，实现现实货币与虚拟货币之间的价值关联。

2. **付款方**  
   - Coin 是由付款方生成的，生成后，**付款方会对其进行盲化处理**，然后将盲化后的 Coin 发送给 *中央银行* 进行签名。每次签名操作消耗一次签名机会。**经过签名后的数据与其签名组合在一起，最终形成一枚有效的 Coin**。
   - 付款过程即是付款方通过任意方式将生成的 Coin 发送给收款方。

3. **收款方**  
   - 收款方在接收到付款方发送的 Coin 后，可以使用 *中央银行* 提供的公钥来验证货币的有效性。收款方还可以选择将验证通过的 Coin 直接发送回 *中央银行* ，兑换为签名机会或现实货币。

这套系统通过盲化签名技术，确保了交易的不可追溯性，同时保持了虚拟货币与现实货币的价值联动。

## Coin 实现及设计规范
pickle 序列化 Coin （model/coin.py） 类后的数据
Coin 货币、Coin 中的签名的传输过程中均为 base64 编码后的字符串

公钥的分发中传输的是 RSAPublicKey 对象 pickle 序列化 后经过 base64 编码的数据

## TODO
有一些小 Bug 还需要修，就是不知道还有没有机会修